<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Index API operations"><title>Index API operations — indices • elastic</title><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Index API operations — indices"><meta property="og:description" content="Index API operations"><meta property="og:image" content="https://docs.ropensci.org/elastic/logo.png"><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css"><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript><!-- End Matomo Code --></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">elastic</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.2.1.91</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="nav-link" href="../articles/elastic.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/elastic/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Index API operations</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/elastic/blob/HEAD/R/index.R" class="external-link"><code>R/index.R</code></a></small>
      <div class="d-none name"><code>indices.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Index API operations</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">index_get</span><span class="op">(</span></span>
<span>  <span class="va">conn</span>,</span>
<span>  index <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  features <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  raw <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">index_exists</span><span class="op">(</span><span class="va">conn</span>, <span class="va">index</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">index_delete</span><span class="op">(</span><span class="va">conn</span>, <span class="va">index</span>, raw <span class="op">=</span> <span class="cn">FALSE</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">index_create</span><span class="op">(</span><span class="va">conn</span>, index <span class="op">=</span> <span class="cn">NULL</span>, body <span class="op">=</span> <span class="cn">NULL</span>, raw <span class="op">=</span> <span class="cn">FALSE</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">index_recreate</span><span class="op">(</span></span>
<span>  <span class="va">conn</span>,</span>
<span>  index <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  body <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  raw <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">index_close</span><span class="op">(</span><span class="va">conn</span>, <span class="va">index</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">index_open</span><span class="op">(</span><span class="va">conn</span>, <span class="va">index</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">index_stats</span><span class="op">(</span></span>
<span>  <span class="va">conn</span>,</span>
<span>  index <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  metric <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  completion_fields <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fielddata_fields <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fields <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  groups <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  level <span class="op">=</span> <span class="st">"indices"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">index_settings</span><span class="op">(</span><span class="va">conn</span>, index <span class="op">=</span> <span class="st">"_all"</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">index_settings_update</span><span class="op">(</span><span class="va">conn</span>, index <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">body</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">index_segments</span><span class="op">(</span><span class="va">conn</span>, index <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">index_recovery</span><span class="op">(</span><span class="va">conn</span>, index <span class="op">=</span> <span class="cn">NULL</span>, detailed <span class="op">=</span> <span class="cn">FALSE</span>, active_only <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">index_optimize</span><span class="op">(</span></span>
<span>  <span class="va">conn</span>,</span>
<span>  index <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_num_segments <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  only_expunge_deletes <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  flush <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  wait_for_merge <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">index_forcemerge</span><span class="op">(</span></span>
<span>  <span class="va">conn</span>,</span>
<span>  index <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_num_segments <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  only_expunge_deletes <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  flush <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">index_upgrade</span><span class="op">(</span><span class="va">conn</span>, index <span class="op">=</span> <span class="cn">NULL</span>, wait_for_completion <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">index_analyze</span><span class="op">(</span></span>
<span>  <span class="va">conn</span>,</span>
<span>  text <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  field <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  index <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  analyzer <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tokenizer <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  filters <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  char_filters <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  body <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">index_flush</span><span class="op">(</span></span>
<span>  <span class="va">conn</span>,</span>
<span>  index <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  force <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  full <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  wait_if_ongoing <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">index_clear_cache</span><span class="op">(</span></span>
<span>  <span class="va">conn</span>,</span>
<span>  index <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  filter <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  filter_keys <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fielddata <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  query_cache <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  id_cache <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">index_shrink</span><span class="op">(</span><span class="va">conn</span>, <span class="va">index</span>, <span class="va">index_new</span>, body <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>conn</dt>
<dd><p>an Elasticsearch connection object, see <code><a href="connect.html">connect()</a></code></p></dd>


<dt>index</dt>
<dd><p>(character) A character vector of index names</p></dd>


<dt>features</dt>
<dd><p>(character) A single feature. One of settings, mappings, or
aliases</p></dd>


<dt>raw</dt>
<dd><p>If <code>TRUE</code> (default), data is parsed to list. If FALSE, then raw JSON.</p></dd>


<dt>verbose</dt>
<dd><p>If <code>TRUE</code> (default) the url call used printed to console.</p></dd>


<dt>...</dt>
<dd><p>Curl args passed on to <a href="https://docs.ropensci.org/crul/reference/HttpClient.html" class="external-link">crul::HttpClient</a></p></dd>


<dt>body</dt>
<dd><p>Query, either a list or json.</p></dd>


<dt>metric</dt>
<dd><p>(character) A character vector of metrics to display. Possible
values: "_all", "completion", "docs", "fielddata", "filter_cache", "flush",
"get", "id_cache", "indexing", "merge", "percolate", "refresh", "search",
"segments", "store", "warmer".</p></dd>


<dt>completion_fields</dt>
<dd><p>(character) A character vector of fields for completion metric
(supports wildcards)</p></dd>


<dt>fielddata_fields</dt>
<dd><p>(character) A character vector of fields for fielddata metric
(supports wildcards)</p></dd>


<dt>fields</dt>
<dd><p>(character) Fields to add.</p></dd>


<dt>groups</dt>
<dd><p>(character) A character vector of search groups for search statistics.</p></dd>


<dt>level</dt>
<dd><p>(character) Return stats aggregated on "cluster", "indices" (default) or "shards"</p></dd>


<dt>detailed</dt>
<dd><p>(logical) Whether to display detailed information about shard recovery.
Default: <code>FALSE</code></p></dd>


<dt>active_only</dt>
<dd><p>(logical) Display only those recoveries that are currently on-going.
Default: <code>FALSE</code></p></dd>


<dt>max_num_segments</dt>
<dd><p>(character) The number of segments the index should be merged into.
Default: "dynamic"</p></dd>


<dt>only_expunge_deletes</dt>
<dd><p>(logical) Specify whether the operation should only expunge
deleted documents</p></dd>


<dt>flush</dt>
<dd><p>(logical) Specify whether the index should be flushed after performing the
operation. Default: <code>TRUE</code></p></dd>


<dt>wait_for_merge</dt>
<dd><p>(logical) Specify whether the request should block until the merge
process is finished. Default: <code>TRUE</code></p></dd>


<dt>wait_for_completion</dt>
<dd><p>(logical) Should the request wait for the upgrade to complete.
Default: <code>FALSE</code></p></dd>


<dt>text</dt>
<dd><p>The text on which the analysis should be performed (when request body is not used)</p></dd>


<dt>field</dt>
<dd><p>Use the analyzer configured for this field (instead of passing the analyzer name)</p></dd>


<dt>analyzer</dt>
<dd><p>The name of the analyzer to use</p></dd>


<dt>tokenizer</dt>
<dd><p>The name of the tokenizer to use for the analysis</p></dd>


<dt>filters</dt>
<dd><p>A character vector of filters to use for the analysis</p></dd>


<dt>char_filters</dt>
<dd><p>A character vector of character filters to use for the analysis</p></dd>


<dt>force</dt>
<dd><p>(logical) Whether a flush should be forced even if it is not necessarily needed
ie. if no changes will be committed to the index.</p></dd>


<dt>full</dt>
<dd><p>(logical) If set to TRUE a new index writer is created and settings that have been
changed related to the index writer will be refreshed.</p></dd>


<dt>wait_if_ongoing</dt>
<dd><p>If TRUE, the flush operation will block until the flush can be executed
if another flush operation is already executing. The default is false and will cause an
exception to be thrown on the shard level if another flush operation is already running.</p></dd>


<dt>filter</dt>
<dd><p>(logical) Clear filter caches</p></dd>


<dt>filter_keys</dt>
<dd><p>(character) A vector of keys to clear when using the <code>filter_cache</code>
parameter (default: all)</p></dd>


<dt>fielddata</dt>
<dd><p>(logical) Clear field data</p></dd>


<dt>query_cache</dt>
<dd><p>(logical) Clear query caches</p></dd>


<dt>id_cache</dt>
<dd><p>(logical) Clear ID caches for parent/child</p></dd>


<dt>index_new</dt>
<dd><p>(character) an index name, required. only applies to
index_shrink method</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><strong>index_analyze</strong>:
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-analyze.html" class="external-link">https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-analyze.html</a>
This method can accept a string of text in the body, but this function passes it as a
parameter in a GET request to simplify.</p>
<p><strong>index_flush</strong>:
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-flush.html" class="external-link">https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-flush.html</a>
From the ES website: The flush process of an index basically frees memory from the index by
flushing data to the index storage and clearing the internal transaction log. By default,
Elasticsearch uses memory heuristics in order to automatically trigger flush operations as
required in order to clear memory.</p>
<p><strong>index_status</strong>: The API endpoint for this function was deprecated in
Elasticsearch <code>v1.2.0</code>, and will likely be removed soon. Use <code>index_recovery()</code>
instead.</p>
<p><strong>index_settings_update</strong>: There are a lot of options you can change with this
function. See
https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-update-settings.html
for all the options.</p>
<p><strong>index settings</strong>: See
https://www.elastic.co/guide/en/elasticsearch/reference/current/index-modules.html
for the <em>static</em> and <em>dynamic</em> settings you can set on indices.</p>
    </div>
    <div class="section level2">
    <h2 id="mappings">Mappings<a class="anchor" aria-label="anchor" href="#mappings"></a></h2>
    

<p>The "keyword" type is not supported in Elasticsearch &lt; v5. If you do use a mapping
with "keyword" type in Elasticsearch &lt; v5 <code>index_create()</code> should fail.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices.html" class="external-link">https://www.elastic.co/guide/en/elasticsearch/reference/current/indices.html</a></p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Scott Chamberlain <a href="mailto:myrmecocystus@gmail.com">myrmecocystus@gmail.com</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># connection setup</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="connect.html">connect</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># get information on an index</span></span></span>
<span class="r-in"><span><span class="fu">index_get</span><span class="op">(</span><span class="va">x</span>, index<span class="op">=</span><span class="st">'shakespeare'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## this one is the same as running index_settings('shakespeare')</span></span></span>
<span class="r-in"><span><span class="fu">index_get</span><span class="op">(</span><span class="va">x</span>, index<span class="op">=</span><span class="st">'shakespeare'</span>, features<span class="op">=</span><span class="st">'settings'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_get</span><span class="op">(</span><span class="va">x</span>, index<span class="op">=</span><span class="st">'shakespeare'</span>, features<span class="op">=</span><span class="st">'mappings'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_get</span><span class="op">(</span><span class="va">x</span>, index<span class="op">=</span><span class="st">'shakespeare'</span>, features<span class="op">=</span><span class="st">'alias'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># check for index existence</span></span></span>
<span class="r-in"><span><span class="fu">index_exists</span><span class="op">(</span><span class="va">x</span>, index<span class="op">=</span><span class="st">'shakespeare'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_exists</span><span class="op">(</span><span class="va">x</span>, index<span class="op">=</span><span class="st">'plos'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create an index</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu">index_exists</span><span class="op">(</span><span class="va">x</span>, <span class="st">'twitter'</span><span class="op">)</span><span class="op">)</span> <span class="fu">index_delete</span><span class="op">(</span><span class="va">x</span>, <span class="st">'twitter'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_create</span><span class="op">(</span><span class="va">x</span>, index<span class="op">=</span><span class="st">'twitter'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu">index_exists</span><span class="op">(</span><span class="va">x</span>, <span class="st">'things'</span><span class="op">)</span><span class="op">)</span> <span class="fu">index_delete</span><span class="op">(</span><span class="va">x</span>, <span class="st">'things'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_create</span><span class="op">(</span><span class="va">x</span>, index<span class="op">=</span><span class="st">'things'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu">index_exists</span><span class="op">(</span><span class="va">x</span>, <span class="st">'plos'</span><span class="op">)</span><span class="op">)</span> <span class="fu">index_delete</span><span class="op">(</span><span class="va">x</span>, <span class="st">'plos'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_create</span><span class="op">(</span><span class="va">x</span>, index<span class="op">=</span><span class="st">'plos'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># re-create an index</span></span></span>
<span class="r-in"><span><span class="fu">index_recreate</span><span class="op">(</span><span class="va">x</span>, <span class="st">"deer"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_recreate</span><span class="op">(</span><span class="va">x</span>, <span class="st">"deer"</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># delete an index</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu">index_exists</span><span class="op">(</span><span class="va">x</span>, <span class="st">'plos'</span><span class="op">)</span><span class="op">)</span> <span class="fu">index_delete</span><span class="op">(</span><span class="va">x</span>, index<span class="op">=</span><span class="st">'plos'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## with a body</span></span></span>
<span class="r-in"><span><span class="va">body</span> <span class="op">&lt;-</span> <span class="st">'{</span></span></span>
<span class="r-in"><span><span class="st"> "settings" : {</span></span></span>
<span class="r-in"><span><span class="st">  "index" : {</span></span></span>
<span class="r-in"><span><span class="st">    "number_of_shards" : 3,</span></span></span>
<span class="r-in"><span><span class="st">    "number_of_replicas" : 2</span></span></span>
<span class="r-in"><span><span class="st">   }</span></span></span>
<span class="r-in"><span><span class="st"> }</span></span></span>
<span class="r-in"><span><span class="st">}'</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu">index_exists</span><span class="op">(</span><span class="va">x</span>, <span class="st">'alsothat'</span><span class="op">)</span><span class="op">)</span> <span class="fu">index_delete</span><span class="op">(</span><span class="va">x</span>, <span class="st">'alsothat'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_create</span><span class="op">(</span><span class="va">x</span>, index<span class="op">=</span><span class="st">'alsothat'</span>, body <span class="op">=</span> <span class="va">body</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## with read only</span></span></span>
<span class="r-in"><span><span class="va">body</span> <span class="op">&lt;-</span> <span class="st">'{</span></span></span>
<span class="r-in"><span><span class="st"> "settings" : {</span></span></span>
<span class="r-in"><span><span class="st">  "index" : {</span></span></span>
<span class="r-in"><span><span class="st">    "blocks" : {</span></span></span>
<span class="r-in"><span><span class="st">      "read_only" : true</span></span></span>
<span class="r-in"><span><span class="st">    }</span></span></span>
<span class="r-in"><span><span class="st">   }</span></span></span>
<span class="r-in"><span><span class="st"> }</span></span></span>
<span class="r-in"><span><span class="st">}'</span></span></span>
<span class="r-in"><span><span class="co"># index_create(x, index='myindex', body = body)</span></span></span>
<span class="r-in"><span><span class="co"># then this delete call should fail with something like:</span></span></span>
<span class="r-in"><span><span class="co">## &gt; Error: 403 - blocked by: [FORBIDDEN/5/index read-only (api)]</span></span></span>
<span class="r-in"><span><span class="co"># index_delete(x, index='myindex')</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## with mappings</span></span></span>
<span class="r-in"><span><span class="va">body</span> <span class="op">&lt;-</span> <span class="st">'{</span></span></span>
<span class="r-in"><span><span class="st"> "mappings": {</span></span></span>
<span class="r-in"><span><span class="st">   "properties": {</span></span></span>
<span class="r-in"><span><span class="st">     "location" : {"type" : "geo_point"}</span></span></span>
<span class="r-in"><span><span class="st">   }</span></span></span>
<span class="r-in"><span><span class="st"> }</span></span></span>
<span class="r-in"><span><span class="st">}'</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu">index_exists</span><span class="op">(</span><span class="va">x</span>, <span class="st">'gbifnewgeo'</span><span class="op">)</span><span class="op">)</span> <span class="fu">index_create</span><span class="op">(</span><span class="va">x</span>, index<span class="op">=</span><span class="st">'gbifnewgeo'</span>, body<span class="op">=</span><span class="va">body</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gbifgeo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"examples"</span>, <span class="st">"gbif_geosmall.json"</span>, package <span class="op">=</span> <span class="st">"elastic"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="docs_bulk.html">docs_bulk</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">gbifgeo</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># close an index</span></span></span>
<span class="r-in"><span><span class="fu">index_create</span><span class="op">(</span><span class="va">x</span>, <span class="st">'plos'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_close</span><span class="op">(</span><span class="va">x</span>, <span class="st">'plos'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># open an index</span></span></span>
<span class="r-in"><span><span class="fu">index_open</span><span class="op">(</span><span class="va">x</span>, <span class="st">'plos'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get stats on an index</span></span></span>
<span class="r-in"><span><span class="fu">index_stats</span><span class="op">(</span><span class="va">x</span>, <span class="st">'plos'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_stats</span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'plos'</span>,<span class="st">'gbif'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_stats</span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'plos'</span>,<span class="st">'gbif'</span><span class="op">)</span>, metric<span class="op">=</span><span class="st">'refresh'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_stats</span><span class="op">(</span><span class="va">x</span>, metric <span class="op">=</span> <span class="st">"indexing"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_stats</span><span class="op">(</span><span class="va">x</span>, <span class="st">'shakespeare'</span>, metric<span class="op">=</span><span class="st">'completion'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_stats</span><span class="op">(</span><span class="va">x</span>, <span class="st">'shakespeare'</span>, metric<span class="op">=</span><span class="st">'completion'</span>, completion_fields <span class="op">=</span> <span class="st">"completion"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_stats</span><span class="op">(</span><span class="va">x</span>, <span class="st">'shakespeare'</span>, metric<span class="op">=</span><span class="st">'fielddata'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_stats</span><span class="op">(</span><span class="va">x</span>, <span class="st">'shakespeare'</span>, metric<span class="op">=</span><span class="st">'fielddata'</span>, fielddata_fields <span class="op">=</span> <span class="st">"evictions"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_stats</span><span class="op">(</span><span class="va">x</span>, <span class="st">'plos'</span>, level<span class="op">=</span><span class="st">"indices"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_stats</span><span class="op">(</span><span class="va">x</span>, <span class="st">'plos'</span>, level<span class="op">=</span><span class="st">"cluster"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_stats</span><span class="op">(</span><span class="va">x</span>, <span class="st">'plos'</span>, level<span class="op">=</span><span class="st">"shards"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get segments information that a Lucene index (shard level) is built with</span></span></span>
<span class="r-in"><span><span class="fu">index_segments</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_segments</span><span class="op">(</span><span class="va">x</span>, <span class="st">'plos'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_segments</span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'plos'</span>,<span class="st">'gbif'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get recovery information that provides insight into on-going index shard recoveries</span></span></span>
<span class="r-in"><span><span class="fu">index_recovery</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_recovery</span><span class="op">(</span><span class="va">x</span>, <span class="st">'plos'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_recovery</span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'plos'</span>,<span class="st">'gbif'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_recovery</span><span class="op">(</span><span class="va">x</span>, <span class="st">"plos"</span>, detailed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_recovery</span><span class="op">(</span><span class="va">x</span>, <span class="st">"plos"</span>, active_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Optimize an index, or many indices</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="fu">es_ver</span><span class="op">(</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">500</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="co">### ES &lt; v5 - use optimize</span></span></span>
<span class="r-in"><span>  <span class="fu">index_optimize</span><span class="op">(</span><span class="va">x</span>, <span class="st">'plos'</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">index_optimize</span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'plos'</span>,<span class="st">'gbif'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">index_optimize</span><span class="op">(</span><span class="va">x</span>, <span class="st">'plos'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="co">### ES &gt; v5 - use forcemerge</span></span></span>
<span class="r-in"><span>  <span class="fu">index_forcemerge</span><span class="op">(</span><span class="va">x</span>, <span class="st">'plos'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Upgrade one or more indices to the latest format. The upgrade process converts any</span></span></span>
<span class="r-in"><span><span class="co"># segments written with previous formats.</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="fu">es_ver</span><span class="op">(</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fl">500</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu">index_upgrade</span><span class="op">(</span><span class="va">x</span>, <span class="st">'plos'</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">index_upgrade</span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'plos'</span>,<span class="st">'gbif'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Performs the analysis process on a text and return the tokens breakdown</span></span></span>
<span class="r-in"><span><span class="co"># of the text</span></span></span>
<span class="r-in"><span><span class="fu">index_analyze</span><span class="op">(</span><span class="va">x</span>, text <span class="op">=</span> <span class="st">'this is a test'</span>, analyzer<span class="op">=</span><span class="st">'standard'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_analyze</span><span class="op">(</span><span class="va">x</span>, text <span class="op">=</span> <span class="st">'this is a test'</span>, analyzer<span class="op">=</span><span class="st">'whitespace'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_analyze</span><span class="op">(</span><span class="va">x</span>, text <span class="op">=</span> <span class="st">'this is a test'</span>, analyzer<span class="op">=</span><span class="st">'stop'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_analyze</span><span class="op">(</span><span class="va">x</span>, text <span class="op">=</span> <span class="st">'this is a test'</span>, tokenizer<span class="op">=</span><span class="st">'keyword'</span>,</span></span>
<span class="r-in"><span>  filters<span class="op">=</span><span class="st">'lowercase'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_analyze</span><span class="op">(</span><span class="va">x</span>, text <span class="op">=</span> <span class="st">'this is a test'</span>, tokenizer<span class="op">=</span><span class="st">'keyword'</span>,</span></span>
<span class="r-in"><span>  filters<span class="op">=</span><span class="st">'lowercase'</span>, char_filters<span class="op">=</span><span class="st">'html_strip'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_analyze</span><span class="op">(</span><span class="va">x</span>, text <span class="op">=</span> <span class="st">'this is a test'</span>, index <span class="op">=</span> <span class="st">'plos'</span>,</span></span>
<span class="r-in"><span>  analyzer<span class="op">=</span><span class="st">"standard"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_analyze</span><span class="op">(</span><span class="va">x</span>, text <span class="op">=</span> <span class="st">'this is a test'</span>, index <span class="op">=</span> <span class="st">'shakespeare'</span>,</span></span>
<span class="r-in"><span>  analyzer<span class="op">=</span><span class="st">"standard"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## NGram tokenizer</span></span></span>
<span class="r-in"><span><span class="va">body</span> <span class="op">&lt;-</span> <span class="st">'{</span></span></span>
<span class="r-in"><span><span class="st">        "settings" : {</span></span></span>
<span class="r-in"><span><span class="st">             "analysis" : {</span></span></span>
<span class="r-in"><span><span class="st">                 "analyzer" : {</span></span></span>
<span class="r-in"><span><span class="st">                     "my_ngram_analyzer" : {</span></span></span>
<span class="r-in"><span><span class="st">                         "tokenizer" : "my_ngram_tokenizer"</span></span></span>
<span class="r-in"><span><span class="st">                     }</span></span></span>
<span class="r-in"><span><span class="st">                 },</span></span></span>
<span class="r-in"><span><span class="st">                 "tokenizer" : {</span></span></span>
<span class="r-in"><span><span class="st">                     "my_ngram_tokenizer" : {</span></span></span>
<span class="r-in"><span><span class="st">                         "type" : "nGram",</span></span></span>
<span class="r-in"><span><span class="st">                         "min_gram" : "2",</span></span></span>
<span class="r-in"><span><span class="st">                         "max_gram" : "3",</span></span></span>
<span class="r-in"><span><span class="st">                         "token_chars": [ "letter", "digit" ]</span></span></span>
<span class="r-in"><span><span class="st">                     }</span></span></span>
<span class="r-in"><span><span class="st">                 }</span></span></span>
<span class="r-in"><span><span class="st">             }</span></span></span>
<span class="r-in"><span><span class="st">      }</span></span></span>
<span class="r-in"><span><span class="st">}'</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu">index_exists</span><span class="op">(</span><span class="va">x</span>, <span class="st">"shakespeare2"</span><span class="op">)</span><span class="op">)</span> <span class="fu">index_delete</span><span class="op">(</span><span class="va">x</span>, <span class="st">"shakespeare2"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="tokenizer_set.html">tokenizer_set</a></span><span class="op">(</span><span class="va">x</span>, index <span class="op">=</span> <span class="st">"shakespeare2"</span>, body<span class="op">=</span><span class="va">body</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_analyze</span><span class="op">(</span><span class="va">x</span>, text <span class="op">=</span> <span class="st">"art thouh"</span>, index <span class="op">=</span> <span class="st">"shakespeare2"</span>,</span></span>
<span class="r-in"><span>  analyzer<span class="op">=</span><span class="st">'my_ngram_analyzer'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Explicitly flush one or more indices.</span></span></span>
<span class="r-in"><span><span class="fu">index_flush</span><span class="op">(</span><span class="va">x</span>, index <span class="op">=</span> <span class="st">"plos"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_flush</span><span class="op">(</span><span class="va">x</span>, index <span class="op">=</span> <span class="st">"shakespeare"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_flush</span><span class="op">(</span><span class="va">x</span>, index <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"plos"</span>,<span class="st">"shakespeare"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_flush</span><span class="op">(</span><span class="va">x</span>, index <span class="op">=</span> <span class="st">"plos"</span>, wait_if_ongoing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_flush</span><span class="op">(</span><span class="va">x</span>, index <span class="op">=</span> <span class="st">"plos"</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Clear either all caches or specific cached associated with one ore more indices.</span></span></span>
<span class="r-in"><span><span class="fu">index_clear_cache</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_clear_cache</span><span class="op">(</span><span class="va">x</span>, index <span class="op">=</span> <span class="st">"plos"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_clear_cache</span><span class="op">(</span><span class="va">x</span>, index <span class="op">=</span> <span class="st">"shakespeare"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_clear_cache</span><span class="op">(</span><span class="va">x</span>, index <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"plos"</span>,<span class="st">"shakespeare"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_clear_cache</span><span class="op">(</span><span class="va">x</span>, filter <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Index settings</span></span></span>
<span class="r-in"><span><span class="co">## get settings</span></span></span>
<span class="r-in"><span><span class="fu">index_settings</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_settings</span><span class="op">(</span><span class="va">x</span>, <span class="st">"_all"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_settings</span><span class="op">(</span><span class="va">x</span>, <span class="st">'gbif'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_settings</span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'gbif'</span>,<span class="st">'plos'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_settings</span><span class="op">(</span><span class="va">x</span>, <span class="st">'*s'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## update settings</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu">index_exists</span><span class="op">(</span><span class="va">x</span>, <span class="st">'foobar'</span><span class="op">)</span><span class="op">)</span> <span class="fu">index_delete</span><span class="op">(</span><span class="va">x</span>, <span class="st">'foobar'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_create</span><span class="op">(</span><span class="va">x</span>, <span class="st">"foobar"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">settings</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>index <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>number_of_replicas <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_settings_update</span><span class="op">(</span><span class="va">x</span>, <span class="st">"foobar"</span>, body <span class="op">=</span> <span class="va">settings</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_get</span><span class="op">(</span><span class="va">x</span>, <span class="st">"foobar"</span><span class="op">)</span><span class="op">$</span><span class="va">foobar</span><span class="op">$</span><span class="va">settings</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Shrink index - Can only shrink an index if it has &gt;1 shard</span></span></span>
<span class="r-in"><span><span class="co">## index must be read only, a copy of every shard in the index must</span></span></span>
<span class="r-in"><span><span class="co">## reside on the same node, and the cluster health status must be green</span></span></span>
<span class="r-in"><span><span class="co">### index_settings_update call to change these</span></span></span>
<span class="r-in"><span><span class="va">settings</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  index.routing.allocation.require._name <span class="op">=</span> <span class="st">"shrink_node_name"</span>,</span></span>
<span class="r-in"><span>  index.blocks.write <span class="op">=</span> <span class="st">"true"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu">index_exists</span><span class="op">(</span><span class="va">x</span>, <span class="st">'barbarbar'</span><span class="op">)</span><span class="op">)</span> <span class="fu">index_delete</span><span class="op">(</span><span class="va">x</span>, <span class="st">'barbarbar'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_create</span><span class="op">(</span><span class="va">x</span>, <span class="st">"barbarbar"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">index_settings_update</span><span class="op">(</span><span class="va">x</span>, <span class="st">"barbarbar"</span>, body <span class="op">=</span> <span class="va">settings</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="cat.html">cat_recovery</a></span><span class="op">(</span><span class="va">x</span>, index<span class="op">=</span><span class="st">'barbarbar'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># index_shrink(x, "barbarbar", "barfoobbar")</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg"></div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-3 col-sm-4">
                        <ul><h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul></div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer></div>

  

  

  </body></html>

